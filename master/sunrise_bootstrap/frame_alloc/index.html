<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `frame_alloc` mod in crate `sunrise_bootstrap`."><meta name="keywords" content="rust, rustlang, rust-lang, frame_alloc"><title>sunrise_bootstrap::frame_alloc - Rust</title><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../dark.css"><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script src="../../storage.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="shortcut icon" href="../../favicon.ico"><style type="text/css">#crate-search{background-image:url("../../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../../sunrise_bootstrap/index.html'><div class='logo-container'><img src='../../rust-logo.png' alt='logo'></div></a><p class='location'>Module frame_alloc</p><div class="sidebar-elems"><div class="block items"><ul><li><a href="#structs">Structs</a></li><li><a href="#constants">Constants</a></li><li><a href="#statics">Statics</a></li><li><a href="#functions">Functions</a></li></ul></div><p class='location'><a href='../index.html'>sunrise_bootstrap</a></p><script>window.sidebarCurrent = {name: 'frame_alloc', ty: 'mod', relpath: '../'};</script><script defer src="../sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><a id="settings-menu" href="../../settings.html"><img src="../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../../src/sunrise_bootstrap/frame_alloc.rs.html#1-324' title='goto source code'>[src]</a></span><span class='in-band'>Module <a href='../index.html'>sunrise_bootstrap</a>::<wbr><a class="mod" href=''>frame_alloc</a></span></h1><div class='docblock'><p>A module implementing a physical memory manager that allocates and frees memory frames</p>
<p>We define a frame as the same size as a page, to make things easy for us.
This module can only allocate and free whole frames.</p>
<p>It keeps tracks of the allocated frames by mean of a giant bitmap mapping every
physical memory frame in the address space to a bit representing if it is free or not.
This works because the address space in 32 bits is only 4GB, so ~1 million frames only</p>
<p>During init we initialize the bitmap by parsing the information that the bootloader gives us and
marking some physical memory regions as reserved, either because of BIOS, MMIO
or simply because our kernel is loaded in it</p>
</div><h2 id='structs' class='section-header'><a href="#structs">Structs</a></h2>
<table><tr class='module-item'><td><a class="struct" href="struct.AllocatorBitmap.html" title='sunrise_bootstrap::frame_alloc::AllocatorBitmap struct'>AllocatorBitmap</a></td><td class='docblock-short'><p>A big bitmap denoting for every frame if it is free or not</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.Frame.html" title='sunrise_bootstrap::frame_alloc::Frame struct'>Frame</a></td><td class='docblock-short'><p>A pointer to a physical frame</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.FrameAllocator.html" title='sunrise_bootstrap::frame_alloc::FrameAllocator struct'>FrameAllocator</a></td><td class='docblock-short'><p>A physical memory manger to allocate and free memory frames</p>
</td></tr></table><h2 id='constants' class='section-header'><a href="#constants">Constants</a></h2>
<table><tr class='module-item'><td><a class="constant" href="constant.FRAMES_BITMAP_SIZE.html" title='sunrise_bootstrap::frame_alloc::FRAMES_BITMAP_SIZE constant'>FRAMES_BITMAP_SIZE</a></td><td class='docblock-short'><p>When testing we use a much smaller array.</p>
</td></tr><tr class='module-item'><td><a class="constant" href="constant.FRAME_BASE_LOG.html" title='sunrise_bootstrap::frame_alloc::FRAME_BASE_LOG constant'>FRAME_BASE_LOG</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="constant" href="constant.FRAME_BASE_MASK.html" title='sunrise_bootstrap::frame_alloc::FRAME_BASE_MASK constant'>FRAME_BASE_MASK</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="constant" href="constant.FRAME_FREE.html" title='sunrise_bootstrap::frame_alloc::FRAME_FREE constant'>FRAME_FREE</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="constant" href="constant.FRAME_OCCUPIED.html" title='sunrise_bootstrap::frame_alloc::FRAME_OCCUPIED constant'>FRAME_OCCUPIED</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="constant" href="constant.FRAME_OFFSET_MASK.html" title='sunrise_bootstrap::frame_alloc::FRAME_OFFSET_MASK constant'>FRAME_OFFSET_MASK</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="constant" href="constant.MEMORY_FRAME_SIZE.html" title='sunrise_bootstrap::frame_alloc::MEMORY_FRAME_SIZE constant'>MEMORY_FRAME_SIZE</a></td><td class='docblock-short'><p>A memory frame is the same size as a page</p>
</td></tr></table><h2 id='statics' class='section-header'><a href="#statics">Statics</a></h2>
<table><tr class='module-item'><td><a class="static" href="static.FRAMES_BITMAP.html" title='sunrise_bootstrap::frame_alloc::FRAMES_BITMAP static'>FRAMES_BITMAP</a></td><td class='docblock-short'><p>A big bitmap denoting for every frame if it is free or not</p>
</td></tr></table><h2 id='functions' class='section-header'><a href="#functions">Functions</a></h2>
<table><tr class='module-item'><td><a class="fn" href="fn.addr_to_frame.html" title='sunrise_bootstrap::frame_alloc::addr_to_frame fn'>addr_to_frame</a></td><td class='docblock-short'><p>Gets the frame number from a physical address</p>
</td></tr><tr class='module-item'><td><a class="fn" href="fn.frame_to_addr.html" title='sunrise_bootstrap::frame_alloc::frame_to_addr fn'>frame_to_addr</a></td><td class='docblock-short'><p>Gets the physical address from a frame number</p>
</td></tr><tr class='module-item'><td><a class="fn" href="fn.round_to_page.html" title='sunrise_bootstrap::frame_alloc::round_to_page fn'>round_to_page</a></td><td class='docblock-short'><p>Rounds an address to its page address</p>
</td></tr><tr class='module-item'><td><a class="fn" href="fn.round_to_page_upper.html" title='sunrise_bootstrap::frame_alloc::round_to_page_upper fn'>round_to_page_upper</a></td><td class='docblock-short'><p>Rounds an address to the next page address except if its offset in that page is 0</p>
</td></tr></table></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../../";window.currentCrate = "sunrise_bootstrap";</script><script src="../../main.js"></script><script defer src="../../search-index.js"></script></body></html>