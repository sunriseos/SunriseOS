<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `sunrise_bootstrap` crate."><meta name="keywords" content="rust, rustlang, rust-lang, sunrise_bootstrap"><title>sunrise_bootstrap - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../dark.css"><link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle"><script src="../storage.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="shortcut icon" href="../favicon.ico"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../sunrise_bootstrap/index.html'><div class='logo-container'><img src='../rust-logo.png' alt='logo'></div></a><p class='location'>Crate sunrise_bootstrap</p><div class="sidebar-elems"><a id='all-types' href='all.html'><p>See all sunrise_bootstrap's items</p></a><div class="block items"><ul><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#statics">Statics</a></li><li><a href="#functions">Functions</a></li></ul></div><p class='location'></p><script>window.sidebarCurrent = {name: 'sunrise_bootstrap', ty: 'mod', relpath: '../'};</script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><a id="settings-menu" href="../settings.html"><img src="../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../src/sunrise_bootstrap/main.rs.html#1-313' title='goto source code'>[src]</a></span><span class='in-band'>Crate <a class="mod" href=''>sunrise_bootstrap</a></span></h1><div class='docblock'><p>Bootstrap stage</p>
<p>This stage is executed right after bootloader, and before we pass control to the kernel.
Its main goal is to enable paging with the kernel mapped at the end of address space,
and jump to kernel after that.</p>
<h2 id="virtual-memory" class="section-header"><a href="#virtual-memory">Virtual memory</a></h2>
<p>What the bootstrap stage does is :</p>
<ol>
<li>create a set of pages</li>
<li>identity map bootstrap sections</li>
<li>load kernel at the end of address space</li>
<li>copy the multiboot2 info to be page aligned.</li>
<li>Map the multiboot2 info in kernel land.</li>
<li>construct a map of kernel sections that will be passed to kernel</li>
<li>create a kernel stack</li>
<li>jump to kernel</li>
</ol>
<h2 id="logging" class="section-header"><a href="#logging">Logging</a></h2>
<p>We implement a really dumb serial logger for the bootstrap stage. We don't use any of the
fancy logging interfaces that the kernel has.</p>
</div><h2 id='modules' class='section-header'><a href="#modules">Modules</a></h2>
<table><tr class='module-item'><td><a class="mod" href="address/index.html" title='sunrise_bootstrap::address mod'>address</a></td><td class='docblock-short'><p>Physical and Virtual address wrappers</p>
</td></tr><tr class='module-item'><td><a class="mod" href="bootstrap_logging/index.html" title='sunrise_bootstrap::bootstrap_logging mod'>bootstrap_logging</a></td><td class='docblock-short'><p>bootstrap logging on rs232</p>
</td></tr><tr class='module-item'><td><a class="mod" href="bootstrap_stack/index.html" title='sunrise_bootstrap::bootstrap_stack mod'>bootstrap_stack</a></td><td class='docblock-short'><p>Bootstrap stack</p>
</td></tr><tr class='module-item'><td><a class="mod" href="elf_loader/index.html" title='sunrise_bootstrap::elf_loader mod'>elf_loader</a></td><td class='docblock-short'><p>Loads the kernel in high memory</p>
</td></tr><tr class='module-item'><td><a class="mod" href="frame_alloc/index.html" title='sunrise_bootstrap::frame_alloc mod'>frame_alloc</a></td><td class='docblock-short'><p>A module implementing a physical memory manager that allocates and frees memory frames</p>
</td></tr><tr class='module-item'><td><a class="mod" href="gdt/index.html" title='sunrise_bootstrap::gdt mod'>gdt</a></td><td class='docblock-short'><p>GDT Handler</p>
</td></tr><tr class='module-item'><td><a class="mod" href="paging/index.html" title='sunrise_bootstrap::paging mod'>paging</a></td><td class='docblock-short'><p>Paging on i386</p>
</td></tr></table><h2 id='structs' class='section-header'><a href="#structs">Structs</a></h2>
<table><tr class='module-item'><td><a class="struct" href="struct.AlignedStack.html" title='sunrise_bootstrap::AlignedStack struct'>AlignedStack</a></td><td class='docblock-short'><p>4 pages, PAGE_SIZE aligned.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.EndTag.html" title='sunrise_bootstrap::EndTag struct'>EndTag</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="struct" href="struct.FramebufferTag.html" title='sunrise_bootstrap::FramebufferTag struct'>FramebufferTag</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="struct" href="struct.ModuleAlignmentTag.html" title='sunrise_bootstrap::ModuleAlignmentTag struct'>ModuleAlignmentTag</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="struct" href="struct.MultiBootHeader.html" title='sunrise_bootstrap::MultiBootHeader struct'>MultiBootHeader</a></td><td class='docblock-short'><p>The multiboot header structure of our binary.</p>
</td></tr></table><h2 id='statics' class='section-header'><a href="#statics">Statics</a></h2>
<table><tr class='module-item'><td><a class="static" href="static.MULTIBOOT_HEADER.html" title='sunrise_bootstrap::MULTIBOOT_HEADER static'>MULTIBOOT_HEADER</a></td><td class='docblock-short'><p>The multiboot header of our binary.</p>
</td></tr><tr class='module-item'><td><a class="static" href="static.STACK.html" title='sunrise_bootstrap::STACK static'>STACK</a></td><td class='docblock-short'><p>The stack we start on.</p>
</td></tr></table><h2 id='functions' class='section-header'><a href="#functions">Functions</a></h2>
<table><tr class='module-item'><td><a class="fn" href="fn.bootstrap_start.html" title='sunrise_bootstrap::bootstrap_start fn'>bootstrap_start</a><a title='unsafe function' href='#'><sup>⚠</sup></a></td><td class='docblock-short'><p>The very start.</p>
</td></tr><tr class='module-item'><td><a class="fn" href="fn.do_bootstrap.html" title='sunrise_bootstrap::do_bootstrap fn'>do_bootstrap</a></td><td class='docblock-short'><p>bootstrap stage and call kernel</p>
</td></tr><tr class='module-item'><td><a class="fn" href="fn.print_stack.html" title='sunrise_bootstrap::print_stack fn'>print_stack</a></td><td class='docblock-short'><p>Prints raw hexdump of the stack.
Use this if everything went wrong and you're really hopeless.</p>
</td></tr></table></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../";window.currentCrate = "sunrise_bootstrap";</script><script src="../main.js"></script><script defer src="../search-index.js"></script></body></html>